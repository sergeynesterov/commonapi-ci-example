cmake_minimum_required( VERSION 2.8.2 )

project( googletest-download C CXX )

find_package( GTest ${GTEST_VERSION} )

if( NOT GTEST_FOUND )
   include( ExternalProject )
   ExternalProject_Add( googletest
      GIT_REPOSITORY    "https://github.com/google/googletest.git"
      GIT_TAG           "release-${GTEST_VERSION}"
      PREFIX            "${GTEST_DIR}"
      BINARY_DIR        "${GTEST_DIR}/src/googletest-build/${CMAKE_CXX_COMPILER_ID}"
      BUILD_COMMAND     "${CMAKE_MAKE_PROGRAM}" -j $(nproc)
      CMAKE_ARGS        "-DCMAKE_INSTALL_PREFIX=${GTEST_ROOT}"
   )
endif()
